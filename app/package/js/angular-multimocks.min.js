angular.module("scenario",["ngMockE2E","multimocks.responseDelay"]).provider("multimocksData",function(){var a={},b={"Content-type":"application/json"},c="_default";this.setHeaders=function(a){b=a},this.setMockData=function(b){a=b},this.addMockData=function(b,c){a[b]=c},this.setDefaultScenario=function(a){c=a},this.$get=function(){return{getMockData:function(){return a},getDefaultScenario:function(){return c},getHeaders:function(){return b}}}}).factory("multimocks",["$q","$http","$httpBackend","multimocksData","scenarioMocks",function(a,b,c,d,e){var f=function(a,e){var f=d.getHeaders(),g=new RegExp("^"+e.uri+"$");if(e.poll){var h=0,i=_.has(e,"pollCount")?e.pollCount:2;c.when(e.httpMethod,g,e.requestData).respond(function(){return i>h?(h++,[204,{},f]):[200,e.response,f]})}else c.when(e.httpMethod,g,e.requestData).respond(e.statusCode,e.response,f);if(e.callInSetup){var j={method:e.httpMethod,url:e.uri};b(j).success(function(b){a.resolve()})}else a.resolve()};return{setup:function(b){var c=a.defer();return _.forOwn(e.getMocks(b),function(a){f(c,a)}),c.promise}}}]).factory("currentScenario",["$window","multimocksData",function(a,b){function c(a){if(-1!==a.indexOf("scenario")){var b=a.slice(1).split("&").map(function(a){return a.split("=")}).filter(function(a){return"scenario"===a[0]});return b[0][1]}return void 0}return{getName:function(){var d=c(a.location.search);return _.isUndefined(d)?b.getDefaultScenario():d}}}]).factory("scenarioMocks",["$log","multimocksData","currentScenario",function(a,b,c){function d(a,b){var c=new RegExp(b);return c.test(a)}var e=b.getMockData(),f={getMocks:function(b){return _.has(e,b)?e[b]:void(b&&a.log("Mocks not found for scenario: "+b))},getMocksForCurrentScenario:function(){return f.getMocks(c.getName())},getDelayForResponse:function(a){var b=f.getMocksForCurrentScenario(),c=_.findIndex(b,function(b){var c=d(a.config.url,b.uri),e=b.httpMethod===a.config.method;return e&&c});return 0>c?0:b[c].responseDelay||0}};return f}]).run(["multimocks","currentScenario",function(a,b){a.setup(b.getName())}]),angular.module("multimocks.responseDelay",[]).factory("responseDelay",["$q","$timeout","scenarioMocks",function(a,b,c){return{response:function(d){var e=a.defer();return b(function(){e.resolve(d)},c.getDelayForResponse(d)),e.promise}}}]).config(["$httpProvider",function(a){a.interceptors.push("responseDelay")}]);